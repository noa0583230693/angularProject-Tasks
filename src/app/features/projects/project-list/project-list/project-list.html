<div class="projects-page">
  <div class="page-header">
    <h1>
      @if(isCameFromTeam()) {
        <span>×¤×¨×•×™×§×˜×™× ×‘×§×‘×•×¦×” {{ teamId }}</span>
      } @else {
        <span>×›×œ ×”×¤×¨×•×™×§×˜×™×</span>
      }
    </h1>
    @if(isCameFromTeam()) {
      <button mat-raised-button color="primary" (click)="goToAddProject()" class="add-button">
        <span>+ ×”×•×¡×£ ×¤×¨×•×™×§×˜ ×—×“×©</span>
      </button>
    }
  </div>

  @if (projects$ | async; as projects) {
    @if (projects.length === 0) {
      <div class="empty-state">
        <div class="empty-icon">ğŸ“¦</div>
        <h3>××™×Ÿ ×¤×¨×•×™×§×˜×™× ×¢×“×™×™×Ÿ</h3>
        <p>×”×ª×—×œ ×¢"×™ ×”×•×¡×¤×ª ×¤×¨×•×™×§×˜ ×—×“×©</p>
      </div>
    } @else {
      <div class="projects-grid">
        @for (project of projects; track project.id) {
          <mat-card class="project-card" (click)="viewProjectTasks(project.id)">
            <mat-card-header>
              <mat-card-title>{{ project.name }}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <p class="project-description">{{ project.description || '××™×Ÿ ×ª×™××•×¨' }}</p>
              <div class="project-meta">
                <span class="meta-item">
                  <span class="meta-icon">ğŸ“…</span>
                  {{ project.created_at | date:'dd/MM/yyyy' }}
                </span>
              </div>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button (click)="viewProjectTasks(project.id); $event.stopPropagation()">
                ×¦×¤×” ×‘××©×™××•×ª â†’
              </button>
            </mat-card-actions>
          </mat-card>
        }
      </div>
    }
  } @else {
    <div class="loading-state">
      <mat-spinner diameter="40"></mat-spinner>
      <p>×˜×•×¢×Ÿ ×¤×¨×•×™×§×˜×™×...</p>
    </div>
  }
</div>
